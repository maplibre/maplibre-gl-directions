<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@maplibre/maplibre-gl-directions - v0.2.4</title><meta name="description" content="Documentation for @maplibre/maplibre-gl-directions - v0.2.4"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@maplibre/maplibre-gl-directions - v0.2.4</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@maplibre/maplibre-gl-directions - v0.2.4 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#maplibregldirections" id="maplibregldirections" style="color: inherit; text-decoration: none;">
  <h1>MapLibreGlDirections</h1>
</a>
<p>For the sakes of your convenience, make sure you&#39;ve enabled the &quot;Public&quot; filter:</p>
<p><img src="https://raw.githubusercontent.com/maplibre/maplibre-gl-directions/main/doc/images/public-filter.png" alt="Enabling the &quot;Public&quot; filter"></p>
<hr>

<a href="#basic-usage" id="basic-usage" style="color: inherit; text-decoration: none;">
  <h2>Basic Usage</h2>
</a>
<p>Start by importing the plugin. Then, when the map is loaded, create an instance of the imported <a href="classes/default.html"><code>MapLibreGlDirections</code></a> class passing to the constructor a map instance and optionally a <a href="interfaces/MapLibreGlDirectionsConfiguration.html">configuration object</a>.</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">MapLibreGlDirections</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@maplibre/maplibre-gl-directions&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">map</span><span class="hl-1">.</span><span class="hl-4">on</span><span class="hl-1">(</span><span class="hl-3">&quot;load&quot;</span><span class="hl-1">, () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">directions</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">MapLibreGlDirections</span><span class="hl-1">(</span><span class="hl-2">map</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-7">// optional configuration</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code></pre>
<p>If needed, enable the interactivity.</p>
<pre><code class="language-typescript"><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-2">interactive</span><span class="hl-1"> = </span><span class="hl-5">true</span><span class="hl-1">;</span>
</code></pre>
<p>Use the plugin&#39;s public interface to set, add and remove waypoints.</p>
<pre><code class="language-typescript"><span class="hl-7">// Set the waypoints programmatically</span><br/><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-4">setWaypoints</span><span class="hl-1">([</span><br/><span class="hl-1">  [-</span><span class="hl-8">73.8271025</span><span class="hl-1">, </span><span class="hl-8">40.8032906</span><span class="hl-1">],</span><br/><span class="hl-1">  [-</span><span class="hl-8">73.8671258</span><span class="hl-1">, </span><span class="hl-8">40.82234996</span><span class="hl-1">],</span><br/><span class="hl-1">]);</span><br/><br/><span class="hl-7">// Remove the first waypoint</span><br/><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-4">removeWaypoint</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">);</span><br/><br/><span class="hl-7">// Add a waypoint at index 0</span><br/><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-4">addWaypoint</span><span class="hl-1">([-</span><span class="hl-8">73.8671258</span><span class="hl-1">, </span><span class="hl-8">40.82234996</span><span class="hl-1">], </span><span class="hl-8">0</span><span class="hl-1">);</span>
</code></pre>
<p>Listen to the plugin&#39;s events.</p>
<pre><code class="language-typescript"><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-4">on</span><span class="hl-1">(</span><span class="hl-3">&quot;movewaypoint&quot;</span><span class="hl-1">, () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-3">&quot;A waypoint has been moved!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Call the <a href="classes/default.html#clear"><code>clear</code></a> method to remove all the plugin&#39;s traces from the map.</p>
<pre><code class="language-typescript"><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-4">clear</span><span class="hl-1">();</span>
</code></pre>
<p>If you need to completely disable the plugin, make sure to call the <a href="classes/default.html#destroy"><code>destroy</code></a> method first.</p>
<pre><code class="language-typescript"><span class="hl-2">directions</span><span class="hl-1">.</span><span class="hl-4">destroy</span><span class="hl-1">();</span><br/><span class="hl-2">directions</span><span class="hl-1"> = </span><span class="hl-5">undefined</span><span class="hl-1">;</span>
</code></pre>
<hr>

<a href="#controls" id="controls" style="color: inherit; text-decoration: none;">
  <h2>Controls</h2>
</a>

<a href="#loadingindicatorcontrol" id="loadingindicatorcontrol" style="color: inherit; text-decoration: none;">
  <h3><code>LoadingIndicatorControl</code></h3>
</a>
<p>The <a href="classes/LoadingIndicatorControl.html">LoadingIndicatorControl</a> adds a spinning wheel that appears whenever there&#39;s an ongoing routing requests and automatically disappears as soon as the request is finished.</p>
<p>The loading indicator&#39;s appearance is configurable via the <a href="interfaces/LoadingIndicatorControlConfiguration.html">LoadingIndicatorControlConfiguration</a> object that is (optionally) passed as the second argument to the constructor.</p>
<p>See the respective <a href="https://maplibre.org/maplibre-gl-directions/#/examples/loading-indicator-control" class="external">Demo</a>.</p>

<a href="#directionscontrol" id="directionscontrol" style="color: inherit; text-decoration: none;">
  <h3><code>DirectionsControl</code></h3>
</a>
<p>WIP (1.x milestone).</p>
<hr>

<a href="#customization" id="customization" style="color: inherit; text-decoration: none;">
  <h2>Customization</h2>
</a>
<p>For the sakes of your convenience, make sure you&#39;ve enabled the &quot;Public/Protected&quot; filter:</p>
<p><img src="https://raw.githubusercontent.com/maplibre/maplibre-gl-directions/main/doc/images/public-protected-filter.png" alt="Enabling the &quot;Public/Protected&quot; filter"></p>
<p>Here&#39;s an example of what can potentially be done after investing some time into customization: straight-lined routing, distance measurement, multiple Directions&#39; instances running in parallel on the same map with a possibility to toggle between them, different types of Waypoints and Snappoints and so on:</p>
<p><img src="https://raw.githubusercontent.com/maplibre/maplibre-gl-directions/main/doc/images/complex-customization.png" alt="A Complex Customization Example"></p>
<p>In short, all the plugin&#39;s customization possibilities fall down into 2 categories: visual-only customization and behavioral customization.</p>

<a href="#visual-only-customization" id="visual-only-customization" style="color: inherit; text-decoration: none;">
  <h2>Visual-only customization</h2>
</a>
<p>Visual-only customization is done by modifying the style layers used by the plugin. You can either remove certain layers altogether, or instead add additional custom ones, or modify existing layers, or refuse from using or modifying the existing layers and instead define new layers from scratch. Or you can combine these different approaches to achieve the look-and-feel you aim towards.</p>
<p>When you create an instance of Directions, you&#39;re allowed to provide the constructor with the <a href="interfaces/MapLibreGlDirectionsConfiguration.html">configuration object</a>. One of the configuration options is the <a href="interfaces/MapLibreGlDirectionsConfiguration.html#layers"><code>layers</code></a> array.</p>
<p>By default (if you don&#39;t provide this configuration option), the plugin uses the default layers that are generated by the <a href="modules.html#layersFactory"><code>layersFactory</code></a> function. But you can instead provide a plain array of <a href="modules.html#LayerSpecification">LayerSpecification</a> objects. See the <a href="https://maplibre.org/maplibre-gl-directions/#/examples/restyling" class="external">Restyling</a> example for a demo.</p>
<p>When re-defining the layers, you must respect the following rules:</p>
<ol>
<li>There must be at least one layer for Waypoints</li>
<li>There must be at least one layer for Snappoints</li>
<li>There must be at least one layer for the Hoverpoint</li>
<li>There must be at least one layer for Routelines</li>
<li>There must be at least one layer for Alternative Routelines (if you plan to enable the respective request option)</li>
</ol>
<p>If you think you don&#39;t need some of these layers, you must still provide them, but use some styling that would allow to actually hide the features represented by the layer. For instance, using the <a href="https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#layout-background-visibility" class="external"><code>visibility</code></a> property.</p>
<p>Waypoints, Snappoints and the Hoverpoint represent (obviously enough) Point GeoJSON Features. So you would most probably like to use either &quot;symbol&quot; or &quot;circle&quot; layer types for those.</p>
<p>Routelines and Alternative Routelines represent GeoJSON LineString Features and therefore must be represented with layers of type &quot;line&quot;.</p>
<p>You can also optionally provide one or more layers for the snaplines (the lines that connect Waypoints to their related snappoints and the Hoverpoint to its related Waypoints).</p>
<p>To filter out the features that are only applicable for the given layers, you can use the following filters:</p>
<ol>
<li>For Snaplines: <code>[&quot;==&quot;, [&quot;get&quot;, &quot;type&quot;], &quot;SNAPLINE&quot;]</code> (meaning: all the features where <code>feature.properties.type === &quot;SNAPLINE&quot;</code>)</li>
<li>For Alternative Routelines: <code>[&quot;==&quot;, [&quot;get&quot;, &quot;route&quot;], &quot;ALT&quot;]</code> (meaning: all the features where <code>feature.properties.route === &quot;ALT&quot;</code>)</li>
<li>For Routelines (i.e. the selected Routeline): <code>[&quot;==&quot;, [&quot;get&quot;, &quot;route&quot;], &quot;SELECTED&quot;]</code> (meaning: all the features where <code>feature.properties.route === &quot;SELECTED&quot;</code>)</li>
<li>For the Hoverpoint: <code>[&quot;==&quot;, [&quot;get&quot;, &quot;type&quot;], &quot;HOVERPOINT&quot;]</code> (meaning: all the features where <code>feature.properties.type === &quot;HOVERPOINT&quot;</code>)</li>
<li>For Snappoints: <code>[&quot;==&quot;, [&quot;get&quot;, &quot;type&quot;], &quot;SNAPPOINT&quot;]</code> (meaning: all the features where <code>feature.properties.type === &quot;SNAPPOINT&quot;</code>)</li>
<li>For Waypoints: <code>[&quot;==&quot;, [&quot;get&quot;, &quot;type&quot;], &quot;WAYPOINT&quot;]</code> (meaning: all the features where <code>feature.properties.type === &quot;WAYPOINT&quot;</code>)</li>
</ol>
<p>Note that the order the layers appear in the array determines the order the features will appear on the map. You are free to use any order that applies better for your exact case, but by default the layers come in the order they&#39;re listed above: the Waypoints&#39; layers are the foremost ones.</p>
<p>Here&#39;s the example of the layers re-definition for the <a href="https://maplibre.org/maplibre-gl-directions/#/examples/restyling" class="external">Restyling</a> example:</p>
<pre><code class="language-typescript"><span class="hl-9">layers</span><span class="hl-1">: [</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions-snapline&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;line&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">layout:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-cap&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;round&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-join&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;round&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">paint:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-dasharray&quot;</span><span class="hl-2">:</span><span class="hl-1"> [</span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-color&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;#ffffff&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-opacity&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-8">0.65</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-width&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">filter:</span><span class="hl-1"> [</span><span class="hl-3">&quot;==&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;get&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;type&quot;</span><span class="hl-1">], </span><span class="hl-3">&quot;SNAPLINE&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions-alt-routeline&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;line&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">layout:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-cap&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;butt&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-join&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;round&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">paint:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-pattern&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;routeline&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-width&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-8">8</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-opacity&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-8">0.5</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">filter:</span><span class="hl-1"> [</span><span class="hl-3">&quot;==&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;get&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;route&quot;</span><span class="hl-1">], </span><span class="hl-3">&quot;ALT&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions-routeline&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;line&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">layout:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-cap&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;butt&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-join&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;round&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">paint:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-pattern&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;routeline&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;line-width&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-8">8</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">filter:</span><span class="hl-1"> [</span><span class="hl-3">&quot;==&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;get&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;route&quot;</span><span class="hl-1">], </span><span class="hl-3">&quot;SELECTED&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions-hoverpoint&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;symbol&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">layout:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-image&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;balloon-hoverpoint&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-anchor&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;bottom&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-ignore-placement&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-overlap&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;always&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">filter:</span><span class="hl-1"> [</span><span class="hl-3">&quot;==&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;get&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;type&quot;</span><span class="hl-1">], </span><span class="hl-3">&quot;HOVERPOINT&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions-snappoint&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;symbol&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">layout:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-image&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;balloon-snappoint&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-anchor&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;bottom&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-ignore-placement&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-overlap&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;always&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">filter:</span><span class="hl-1"> [</span><span class="hl-3">&quot;==&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;get&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;type&quot;</span><span class="hl-1">], </span><span class="hl-3">&quot;SNAPPOINT&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions-waypoint&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;symbol&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&quot;maplibre-gl-directions&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">layout:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-image&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;balloon-waypoint&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-anchor&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;bottom&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-ignore-placement&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;icon-overlap&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;always&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">filter:</span><span class="hl-1"> [</span><span class="hl-3">&quot;==&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;get&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;type&quot;</span><span class="hl-1">], </span><span class="hl-3">&quot;WAYPOINT&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">];</span>
</code></pre>
<p>As you can see, each layer type is represented by one layer: one for Snaplines, one for the Hoverpoint and so on. But you&#39;re not restricted to one layer-per-feature. Each feature could easily be represented by multiple layers. By the way, that&#39;s exactly the way the things are implemented by default. E.g. each Waypoint is by default represented by 2 layers: one for the casing (&quot;halo&quot;, as the MapLibre spec calls it) and one for the main, central circle.</p>
<p>By default, the plugin expects you to provide casings for Waypoints, Snappoints, Hoverpoint, and all the Routelines. The thing here is that all these features are made interactive (except for the Hoverpoint&#39;s casing) because the user would probably like to be able not to aim exactly at the very center of a Waypoint to be able to move it, but also to be able to drag the Waypoint by it casing. Here comes the concept of sensitive layers.</p>
<p>If you decide to deviate from the default model where there are 2 layers for Waypoints, 2 layers for Snappoints, 2 layers for Routelines and 2 layers for Alternative Routelines, you must manually specify which layers should be considered sensitive for each group of these features. Please, see the <a href="https://maplibre.org/maplibre-gl-directions/#/examples/restyling" class="external">Restyling</a> example for details. Namely, take a look at the source code for the example.</p>
<p>Originally, the definitions of the sensitive layers look like these:</p>
<ol>
<li><code>sensitiveWaypointLayers: [&quot;maplibre-gl-directions-waypoint&quot;, &quot;maplibre-gl-directions-waypoint-casing&quot;]</code></li>
<li><code>sensitiveSnappointLayers: [&quot;maplibre-gl-directions-snappoint&quot;, &quot;maplibre-gl-directions-snappoint-casing&quot;]</code></li>
<li><code>sensitiveRoutelineLayers: [&quot;maplibre-gl-directions-routeline&quot;, &quot;maplibre-gl-directions-routeline-casing&quot;]</code></li>
<li><code>sensitiveAltRoutelineLayers: [&quot;maplibre-gl-directions-alt-routeline&quot;, &quot;maplibre-gl-directions-alt-routeline-casing&quot;]</code></li>
</ol>
<p>If you, e.g., decide to use the only <code>&quot;my-waypoint&quot;</code> layer to represent all the Waypoints, you must update the <code>sensitiveWaypointLayers</code> option&#39;s value respectfully: <code>sensitiveWaypointLayers: [&quot;my-waypoint&quot;]</code>.</p>
<p>Also, don&#39;t forget to make sure that all the custom icons and images you use for your custom layers are loaded and added to the map before you create an instance of Directions.</p>
<p>Another example of your interest might be the <a href="https://maplibre.org/maplibre-gl-directions/#/examples/show-routes'-directions" class="external">Show Routes&#39; Directions</a> one. It shows how to add an additional &quot;symbol&quot; layer to show arrows that represent the route&#39;s direction.</p>

<a href="#behavioral-customization" id="behavioral-customization" style="color: inherit; text-decoration: none;">
  <h2>Behavioral customization</h2>
</a>
<p>Behavioral customization allows you (jokes aside) to customize the plugin&#39;s behavior. It might be some minor customization (like saving some additional information for each waypoint in order to be able to somehow manipulate that saved data later) or some more complex cases like allowing for different types of waypoints - routed and straight-lined waypoints, though we won&#39;t cover the last case in this guide at least because it requires some severe updates on the back-end-side.</p>
<p>Behavioral customization in its main comes down to 2 different strategies. In order to pick the most appropriate one, ask yourself a question: does the plugin&#39;s public interface provide enough data to satisfy my case?</p>
<p>If the answer is &quot;yes&quot;, then in most cases all you&#39;d need is to listen to events and react to them appropriately. But if you need some additional data that comes from the server, or some intrinsic plugin&#39;s properties, you&#39;d need to extend the <a href="classes/default.html"><code>MapLibreGlDirections</code></a> superclass with a subclass:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">MapLibreGlDirections</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@maplibre/maplibre-gl-directions&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-10">MyCustomDirections</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-10">MapLibreGlDirections</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">constructor</span><span class="hl-1">(</span><span class="hl-2">map</span><span class="hl-1">: </span><span class="hl-10">maplibregl</span><span class="hl-1">.</span><span class="hl-10">Map</span><span class="hl-1">, </span><span class="hl-2">configuration</span><span class="hl-1">?: </span><span class="hl-10">Partial</span><span class="hl-1">&lt;</span><span class="hl-10">MapLibreGlDirectionsConfiguration</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">    </span><span class="hl-5">super</span><span class="hl-1">(</span><span class="hl-2">map</span><span class="hl-1">, </span><span class="hl-2">configuration</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Then, instead of creating an instance of the <a href="classes/default.html">default</a> class, you create an instance of your custom class:</p>
<pre><code class="language-typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">directions</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">MyCustomDirections</span><span class="hl-1">(</span><span class="hl-2">map</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-2">requestOptions:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">alternatives:</span><span class="hl-1"> </span><span class="hl-3">&quot;true&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>In that subclass you&#39;re free to augment the default implementation the way you need, to remove methods and properties, to create your own custom ones, to modify and extend the built-in standard ones and more.</p>
<p>There are 2 examples available at the moment that cover the subclass-extensibility case. The fist one is the <a href="https://maplibre.org/maplibre-gl-directions/#/examples/distance-measurement" class="external">Distance Measurement</a>. It shows how to extend the <a href="classes/default.html">default</a> superclass with a subclass in a way so that the instance produced by the last would allow you to display each route leg&#39;s distance along the respective routeline. It also uses the <a href="interfaces/MapLibreGlDirectionsEventType.html#removewaypoint"><code>removewaypoint</code></a> and <a href="interfaces/MapLibreGlDirectionsEventType.html#fetchroutesend"><code>fetchroutesend</code></a> events to read the response&#39;s total distance field to be able to display it in the UI.</p>
<p>The second example is called <a href="https://maplibre.org/maplibre-gl-directions/#/examples/load-and-save" class="external">Load and Save</a>. It considers the case when you need to be able to load and save the (pre)built route as a collection of GeoJSON Features.</p>
<p>The only thing that you should be aware of when trying to extend the plugin&#39;s default functionality with a subclass is that there exist two different approaches of extending the default methods.</p>
<p>The thing here is that some methods of the main class are defined on it as usual normal methods, and some other being not exactly methods in common sense, but rather properties which hold functions in them.</p>
<p>There&#39;s (almost) no difference from the architectual-design perspective, but the language still implies some restrictions over semantics for extensibility.</p>
<p>Namely, normally you&#39;re allowed to re-define some existing method of a superclass like this if your goal is to also make use of the super method&#39;s functionality:</p>
<pre><code class="language-typescript"><span class="hl-4">existingSuperMethod</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">originalResult</span><span class="hl-1"> = </span><span class="hl-5">super</span><span class="hl-1">.</span><span class="hl-4">existingSuperMethod</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-7">// ... do other stuff with the result</span><br/><span class="hl-1">}</span>
</code></pre>
<p>But in cases with e.g. utility-methods of the plugin that becomes impossible, and what you need to do instead is to first save the original implementation somewhere (let&#39;s say as a class field) and then to manually call it where appropriate as if it was a super-call:</p>
<pre><code class="language-typescript"><span class="hl-7">// where the `utils` comes from the `import { utils } from &quot;@maplibre/maplibre-gl-directions&quot;`</span><br/><span class="hl-2">originalBuildRoutelines</span><span class="hl-1"> = </span><span class="hl-2">utils</span><span class="hl-1">.</span><span class="hl-2">buildRoutelines</span><span class="hl-1">;</span><br/><br/><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-4">buildRoutelines</span><span class="hl-1"> = (</span><br/><span class="hl-1">  </span><span class="hl-2">requestOptions</span><span class="hl-1">: </span><span class="hl-10">MapLibreGlDirectionsConfiguration</span><span class="hl-1">[</span><span class="hl-3">&quot;requestOptions&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-2">routes</span><span class="hl-1">: </span><span class="hl-10">Route</span><span class="hl-1">[],</span><br/><span class="hl-1">  </span><span class="hl-2">selectedRouteIndex</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">snappoints</span><span class="hl-1">: </span><span class="hl-10">Feature</span><span class="hl-1">&lt;</span><span class="hl-10">Point</span><span class="hl-1">&gt;[],</span><br/><span class="hl-1">): </span><span class="hl-10">Feature</span><span class="hl-1">&lt;</span><span class="hl-10">LineString</span><span class="hl-1">&gt;[][] </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// first we call the original method. It returns the built routelines</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">routelines</span><span class="hl-1"> = </span><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">originalBuildRoutelines</span><span class="hl-1">(</span><span class="hl-2">requestOptions</span><span class="hl-1">, </span><span class="hl-2">routes</span><span class="hl-1">, </span><span class="hl-2">selectedRouteIndex</span><span class="hl-1">, </span><span class="hl-2">snappoints</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// modify these routelines the way you need</span><br/><span class="hl-1">  </span><span class="hl-7">// ...</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// and don&#39;t forget to return the resulting modified routelines</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">routelines</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>See the examples&#39; source codes to dive deeper into the implementation details. There are a lot of possibilities, and it&#39;s a really tricky business to describe each possible detail here in the docs. Feel free to experiment and ask a question either in the MapLibre&#39;s official channel in Slack or even open an issue (or a new discussion) in the plugin&#39;s GitHub repo.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace tsd-is-protected"><a href="modules/utils.html">utils</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/LoadingIndicatorControl.html" class="tsd-kind-icon">Loading<wbr/>Indicator<wbr/>Control</a></li><li class="tsd-kind-class tsd-is-protected"><a href="classes/MapLibreGlDirectionsRoutingEvent.html" class="tsd-kind-icon">Map<wbr/>Libre<wbr/>Gl<wbr/>Directions<wbr/>Routing<wbr/>Event</a></li><li class="tsd-kind-class tsd-is-protected"><a href="classes/MapLibreGlDirectionsWaypointEvent.html" class="tsd-kind-icon">Map<wbr/>Libre<wbr/>Gl<wbr/>Directions<wbr/>Waypoint<wbr/>Event</a></li><li class="tsd-kind-class tsd-is-protected tsd-is-external"><a href="classes/MapMouseEvent.html" class="tsd-kind-icon">Map<wbr/>Mouse<wbr/>Event</a></li><li class="tsd-kind-class tsd-is-protected tsd-is-external"><a href="classes/MapTouchEvent.html" class="tsd-kind-icon">Map<wbr/>Touch<wbr/>Event</a></li><li class="tsd-kind-class"><a href="classes/default.html" class="tsd-kind-icon">default</a></li><li class="tsd-kind-interface tsd-is-protected"><a href="interfaces/Directions.html" class="tsd-kind-icon">Directions</a></li><li class="tsd-kind-interface tsd-has-type-parameter tsd-is-protected tsd-is-external"><a href="interfaces/Feature.html" class="tsd-kind-icon">Feature</a></li><li class="tsd-kind-interface tsd-is-protected"><a href="interfaces/Leg.html" class="tsd-kind-icon">Leg</a></li><li class="tsd-kind-interface tsd-is-protected tsd-is-external"><a href="interfaces/LineString.html" class="tsd-kind-icon">Line<wbr/>String</a></li><li class="tsd-kind-interface"><a href="interfaces/LoadingIndicatorControlConfiguration.html" class="tsd-kind-icon">Loading<wbr/>Indicator<wbr/>Control<wbr/>Configuration</a></li><li class="tsd-kind-interface"><a href="interfaces/MapLibreGlDirectionsConfiguration.html" class="tsd-kind-icon">Map<wbr/>Libre<wbr/>Gl<wbr/>Directions<wbr/>Configuration</a></li><li class="tsd-kind-interface"><a href="interfaces/MapLibreGlDirectionsEventType.html" class="tsd-kind-icon">Map<wbr/>Libre<wbr/>Gl<wbr/>Directions<wbr/>Event<wbr/>Type</a></li><li class="tsd-kind-interface tsd-is-protected"><a href="interfaces/MapLibreGlDirectionsWaypointEventData.html" class="tsd-kind-icon">Map<wbr/>Libre<wbr/>Gl<wbr/>Directions<wbr/>Waypoint<wbr/>Event<wbr/>Data</a></li><li class="tsd-kind-interface tsd-is-protected tsd-is-external"><a href="interfaces/Point.html" class="tsd-kind-icon">Point</a></li><li class="tsd-kind-interface tsd-is-protected"><a href="interfaces/Route.html" class="tsd-kind-icon">Route</a></li><li class="tsd-kind-interface tsd-is-protected"><a href="interfaces/Snappoint.html" class="tsd-kind-icon">Snappoint</a></li><li class="tsd-kind-type-alias tsd-is-protected tsd-is-external"><a href="modules.html#LayerSpecification" class="tsd-kind-icon">Layer<wbr/>Specification</a></li><li class="tsd-kind-type-alias tsd-is-protected"><a href="modules.html#MapLibreGlDirectionsRoutingEventData" class="tsd-kind-icon">Map<wbr/>Libre<wbr/>Gl<wbr/>Directions<wbr/>Routing<wbr/>Event<wbr/>Data</a></li><li class="tsd-kind-type-alias tsd-is-protected"><a href="modules.html#PointType" class="tsd-kind-icon">Point<wbr/>Type</a></li><li class="tsd-kind-function"><a href="modules.html#layersFactory" class="tsd-kind-icon">layers<wbr/>Factory</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li><li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>